<div style="display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 30px;">
  {% for item in restaurants_with_ratings %}
    <div class="card" style="padding: 15px 18px; transition: all 0.3s; cursor: pointer; border: 2px solid transparent; display: inline-block;" 
         onclick="window.location.href='{% url 'restaurant_detail' item.restaurant.id %}';"
         onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 6px 16px rgba(0,0,0,0.12)'; this.style.borderColor='#FB8B24';" 
         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 5px rgba(0,0,0,0.1)'; this.style.borderColor='transparent';">
      <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
        <h4 style="margin: 0; color: #5B5941; font-size: 1.05em; white-space: nowrap;">{{ item.restaurant.name }}</h4>
          {% if item.avg_rating %}
            <div style="display: flex; align-items: center; gap: 3px; flex-shrink: 0;">
              <span style="color: #FB8B24; font-size: 1em;">★</span>
              <span style="font-weight: 600; color: #5B5941; font-size: 0.9em;">{{ item.avg_rating }}</span>
              <span style="color: rgba(91, 89, 65, 0.5); font-size: 0.75em;">({{ item.review_count }})</span>
            </div>
          {% endif %}
          {% if item.restaurant.happy_hour %}
            <div style="display: inline-flex; align-items: center; gap: 3px; background-color: rgba(251, 139, 36, 0.15); color: #FB8B24; padding: 2px 8px; border-radius: 10px; font-size: 0.7em; font-weight: 600; flex-shrink: 0;">
              <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
              </svg>
              HH
            </div>
          {% endif %}
        </div>
        <div style="display: inline-block; padding: 3px 10px; background-color: rgba(251, 139, 36, 0.15); color: #FB8B24; border-radius: 12px; font-size: 0.75em; font-weight: 600; margin-bottom: 8px;">
          {{ item.restaurant.cuisine_type }}
        </div>
        <a href="https://www.google.com/maps/search/?api=1&query={{ item.restaurant.address_line1|urlencode }}{% if item.restaurant.address_line2 %},{{ item.restaurant.address_line2|urlencode }}{% endif %},{{ item.restaurant.city|urlencode }},{{ item.restaurant.province|urlencode }},{{ item.restaurant.postal_code|urlencode }},{{ item.restaurant.country|urlencode }}" 
           target="_blank" 
           onclick="event.stopPropagation(); event.preventDefault(); window.open(this.href, '_blank');"
           style="text-decoration: none; display: flex; align-items: center; gap: 5px; margin-top: 6px;"
           onmouseover="this.querySelector('span').style.color='#FB8B24'; this.querySelector('svg').style.stroke='#FB8B24';"
           onmouseout="this.querySelector('span').style.color='rgba(91, 89, 65, 0.6)'; this.querySelector('svg').style.stroke='rgba(91, 89, 65, 0.6)';">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="rgba(91, 89, 65, 0.6)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transition: all 0.3s;">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
            <circle cx="12" cy="10" r="3"></circle>
          </svg>
          <span style="font-size: 0.8em; color: rgba(91, 89, 65, 0.6); white-space: nowrap; transition: all 0.3s;">{{ item.restaurant.city }}, {{ item.restaurant.province }}</span>
        </a>
      </div>
    </div>
  {% empty %}
    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: rgba(91, 89, 65, 0.5);">
      <p style="font-size: 1.2em; margin: 0;">No restaurants found</p>
      <p style="font-size: 0.9em; margin-top: 5px;">Try adjusting your search or filters</p>
    </div>
  {% endfor %}
</div>

<!-- Pagination -->
{% if page_obj.paginator.num_pages > 1 %}
  <div style="display: flex; justify-content: center; align-items: center; gap: 15px; margin-top: 30px;">
    {% if page_obj.has_previous %}
      <a href="?q={{ query }}&page={{ page_obj.previous_page_number }}" 
         style="padding: 10px 20px; background-color: #FB8B24; color: #F7EDE2; border-radius: 8px; text-decoration: none; font-weight: 500; transition: all 0.3s;"
         onmouseover="this.style.backgroundColor='#e07a1f';"
         onmouseout="this.style.backgroundColor='#FB8B24';">
        ← Previous
      </a>
    {% endif %}
    
    <span style="font-weight: 500; color: #5B5941;">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
    
    {% if page_obj.has_next %}
      <a href="?q={{ query }}&page={{ page_obj.next_page_number }}" 
         style="padding: 10px 20px; background-color: #FB8B24; color: #F7EDE2; border-radius: 8px; text-decoration: none; font-weight: 500; transition: all 0.3s;"
         onmouseover="this.style.backgroundColor='#e07a1f';"
         onmouseout="this.style.backgroundColor='#FB8B24';">
        Next →
      </a>
    {% endif %}
  </div>
{% endif %}
