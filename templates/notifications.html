{% extends "base.html" %}
{% block content %}
<div class="container">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <h2>Notifications {% if unread_count > 0 %}<span style="background: #FB8B24; color: white; padding: 2px 10px; border-radius: 20px; font-size: 0.7em; margin-left: 10px;">{{ unread_count }}</span>{% endif %}</h2>
    {% if unread_count > 0 %}
      <a href="?mark_read=all" style="color: #FB8B24; text-decoration: none; font-weight: 500;">Mark all as read</a>
    {% endif %}
  </div>
  
  {% if notifications %}
    <div style="display: flex; flex-direction: column; gap: 10px;">
      {% for notification in notifications %}
        <a href="{% url 'mark_notification_read' notification.id %}" style="text-decoration: none; color: inherit;">
          <div style="padding: 15px 20px; background: {% if not notification.is_read %}#FFF7ED{% else %}white{% endif %}; border: 2px solid rgba(91, 89, 65, 0.1); border-radius: 10px; transition: all 0.2s; {% if not notification.is_read %}border-left: 4px solid #FB8B24;{% endif %}" 
               onmouseover="this.style.boxShadow='0 2px 8px rgba(0,0,0,0.08)'; this.style.transform='translateY(-1px)';" 
               onmouseout="this.style.boxShadow='none'; this.style.transform='translateY(0)';">
            
            <div style="display: flex; align-items: start; gap: 12px;">
              <!-- Icon based on notification type -->
              <div style="flex-shrink: 0; width: 40px; height: 40px; border-radius: 50%; background: {% if notification.notification_type == 'menu_item_added' %}#E8F5E9{% elif notification.notification_type == 'review_like' %}#FFE5E5{% elif notification.notification_type == 'comment' %}#E3F2FD{% else %}#F3E5F5{% endif %}; display: flex; align-items: center; justify-content: center;">
                {% if notification.notification_type == 'menu_item_added' %}
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z" fill="#4CAF50"/>
                  </svg>
                {% elif notification.notification_type == 'review_like' %}
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="#F44336"/>
                  </svg>
                {% elif notification.notification_type == 'comment' %}
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z" fill="#2196F3"/>
                  </svg>
                {% else %}
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" fill="#9C27B0"/>
                  </svg>
                {% endif %}
              </div>
              
              <div style="flex: 1;">
                <p style="margin: 0 0 5px 0; font-weight: {% if not notification.is_read %}600{% else %}500{% endif %}; color: #5B5941;">
                  {{ notification.get_message }}
                </p>
                <p style="margin: 0; font-size: 0.85em; color: rgba(91, 89, 65, 0.6);">
                  {{ notification.created_at|timesince }} ago
                </p>
              </div>
              
              {% if not notification.is_read %}
                <div style="flex-shrink: 0; width: 8px; height: 8px; border-radius: 50%; background: #FB8B24;"></div>
              {% endif %}
            </div>
          </div>
        </a>
      {% endfor %}
    </div>
  {% else %}
    <div style="text-align: center; padding: 60px 20px; background: transparent; border-radius: 10px;">
      <svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="opacity: 0.3; margin-bottom: 20px;">
        <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z" fill="#5B5941"/>
      </svg>
      <h3 style="color: rgba(91, 89, 65, 0.6); margin: 0 0 10px 0;">No notifications yet</h3>
      <p style="color: rgba(91, 89, 65, 0.4); margin: 0;">We'll notify you when someone interacts with your reviews or when new items are added to your favorite restaurants.</p>
    </div>
  {% endif %}
</div>
{% endblock %}
